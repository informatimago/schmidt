.. comment: -*- mode:rst; coding:utf-8 -*-


Specifications MIDI Librarian
############################################################



The `MIDI Librarian` application lets the user edit sets and banks of
programs, to save sysex files (.syx) containing programs, banks or
sets, and when possible, to communicate with the MIDI synthesizer to
transfer programs, banks or sets, either in batch or during
interactive use.

Additionnal entities may be edited, to help organizing programs, banks
and sets off-line.




::

    entry ::= directory | program-file .
    directory ::= name { entry } .
    program-file ::= name { program } .
    program ::= name category data .
    bank ::= number 256* program .
    set  :=  8* bank . -- unique bank numbers.y

    category ::= name color .
    categories ::= 64* category . -- unique colors.





Functionalities
------------------------------------------------------------



For the Schmidt Synthesizer, the `categories` are names given to the
predefined set of colors (0â€¦63).  `Categories` are lists of 64 names.
Each `Set` has it own list of `Categories`, initialized with the
default list.


- Edit the list of default categories:

   - select the default list of categories.

   - select a category in the default list.

   - edit its name.


- Edit the list of categories of a Set:

   - select a Set.

   - select the list of categories.

   - select a category in the default list.

   - edit its name.




Currently, we can only transfer single banks or multi banks manually.
Sending or receiving a whole set requires 16 manual operations (8
single banks, and 8 multi banks).

Therefore we will provide the basic functionality of sending and
receiving banks.  Sending a Set will involve sending the 16 banks with
manual synchronization.

- Configure MIDI: select the MIDI bus and the Send and Receive MIDI Channels.

- Listen for Sysex messages to automatically initiate the reception of
  banks.  When received a bank Sysex, store it in a new Bank, and
  store the bank in a new Set.  The banks are numbered, so we can fill
  the Set. A new Set is created if a bank of the same kind and number
  is sent again.  The bank and sets are automatically given a default
  name containing a time stamp.

- Listen for program changes and NPRN messages to automatically update the current program.

- Send a Bank:

  - select a Bank,

  - activate the sending process (click on the send button).

- Send a Set:

  - select a Set,

  - activate the sending process (click on the send button): this will
    send each bank in the set in turn, waiting for user confirmation
    between the sending of two banks (so the user may save the bank on
    the Schmidt synthesizer, in the right place).



Sets and Banks are stored each in their own hierarchical directory
tree.  Programs are usually stored in banks, but they can also be
stored stand-alone in their own hierarchical directory tree.

Manipulation of a directory tree:

- create directory
- rename directory
- move directories and items in the tree
- delete an empty directory
- delete recursively a filled directory (!)
- create an item in a directory
- delete an item from a directory
- rename an item from a directory
- select one or more items in the directory tree (for further manipulations, like opening, etc).


Manipulation of Banks

- open a bank : the list of programs in the bank is shown.

- close an opened bank.

Banks can be selected from the bank directory tree (from any "open"
directory), from the desktop, or from open Sets.

- move (or make copies) from one to eight selected banks, to the
  directory tree, the desktop or to an existing open set.

- create a new set and fill it with (copies of) the selected banks.

- send from one to eight selected banks to a Schmidt synthesizer
  (represented as an icon on the desktop).


Manipulation of Sets

- open a set :  the list of banks in the set is shown.

- close an opened set.

Sets can be selected from the set directory tree (from any "open"
directory), or from the desktop.

- move (or make copies) of the selected sets to the directory tree or
  the desktop.

- send one selected set to a Schmidt synthesizer
  (represented as an icon on the desktop).


Manipulation of Programs

- open a program : shows the parameters of the program.
- close an opened program.
- rename a program
- set the category/color of selected programs.

Programs can be selected from the program directory tree (from any "open"
directory), from the desktop, or from an open bank.

- move (or make copies) of the selected programs to the directory
  tree, the desktop, or an open bank.

- send one selected program to a Schmidt synthesizer (currently, this
  only configures the current program of the synthesizer sending NPRN
  messages).


Manipulation of the Synthesizer icon

- opening the Synthesizer icon will show the current program
  parameters, updated as PC, BC and NPRN messages are received.


